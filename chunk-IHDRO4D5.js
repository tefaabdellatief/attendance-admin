import{a as $}from"./chunk-VJJD6Q4W.js";import{b as D,c as W,d as z,e as N,f as B,g as L,h as R,i as j,j as q,k as Y,l as G,m as H,n as J,o as K,p as Q,q as X,r as Z}from"./chunk-OVLE5S5M.js";import{a as T}from"./chunk-VRPC7EEM.js";import"./chunk-X5YLR3NI.js";import{$ as a,B as M,C as S,Ca as V,G as f,Ia as k,Ka as U,M as m,N as n,O as r,Oa as O,P as v,S as g,T as p,U as l,X as P,Z as E,aa as y,ba as F,da as h,ea as b,fa as C,n as _,o as c,wa as A,x,xa as I,z as s}from"./chunk-JMF3YSV7.js";import{i as w}from"./chunk-ODN5LVDJ.js";function te(u,i){u&1&&v(0,"app-spinner",8),u&2&&m("overlay",!1)}function ie(u,i){if(u&1){let e=g();n(0,"div",9)(1,"span"),a(2,"\u26A0\uFE0F"),r(),n(3,"p"),a(4),r(),n(5,"app-button",10),p("btnClick",function(){_(e);let o=l();return c(o.loadUser())}),a(6,"\u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629"),r()()}if(u&2){let e=l();s(4),y(e.error)}}function ne(u,i){u&1&&(n(0,"div",51),a(1," \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644 \u0645\u0637\u0644\u0648\u0628 "),r())}function re(u,i){u&1&&(n(0,"div",51),a(1," \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0645\u0637\u0644\u0648\u0628 "),r())}function oe(u,i){if(u&1&&(n(0,"option",30),a(1),r()),u&2){let e=i.$implicit;m("ngValue",e.id),s(),F(" ",e.name," ")}}function ue(u,i){if(u&1){let e=g();n(0,"div",52),v(1,"img",53),n(2,"button",54),p("click",function(){_(e);let o=l(2);return c(o.removeImage("reference_image"))}),a(3,"\xD7"),r()()}if(u&2){let e=l(2);s(),m("src",e.user.reference_image,x)}}function ae(u,i){if(u&1){let e=g();n(0,"div",55)(1,"input",56),p("change",function(o){_(e);let d=l(2);return c(d.onImageSelected(o,"reference_image"))}),r(),n(2,"label",57)(3,"span",58),a(4,"\u{1F4F7}"),r(),n(5,"span"),a(6,"\u0627\u062E\u062A\u0631 \u0635\u0648\u0631\u0629"),r()()()}}function se(u,i){if(u&1){let e=g();n(0,"div",59),v(1,"img",60),n(2,"button",61),p("click",function(){_(e);let o=l(2);return c(o.removePreview("reference_image"))}),a(3,"\xD7"),r()()}if(u&2){let e=l(2);s(),m("src",e.imagePreviews.reference_image,x)}}function me(u,i){if(u&1){let e=g();n(0,"div",52),v(1,"img",62),n(2,"button",54),p("click",function(){_(e);let o=l(2);return c(o.removeImage("front_id_image"))}),a(3,"\xD7"),r()()}if(u&2){let e=l(2);s(),m("src",e.user.front_id_image,x)}}function le(u,i){if(u&1){let e=g();n(0,"div",55)(1,"input",63),p("change",function(o){_(e);let d=l(2);return c(d.onImageSelected(o,"front_id_image"))}),r(),n(2,"label",64)(3,"span",58),a(4,"\u{1F194}"),r(),n(5,"span"),a(6,"\u0627\u062E\u062A\u0631 \u0635\u0648\u0631\u0629"),r()()()}}function de(u,i){if(u&1){let e=g();n(0,"div",59),v(1,"img",60),n(2,"button",61),p("click",function(){_(e);let o=l(2);return c(o.removePreview("front_id_image"))}),a(3,"\xD7"),r()()}if(u&2){let e=l(2);s(),m("src",e.imagePreviews.front_id_image,x)}}function _e(u,i){if(u&1){let e=g();n(0,"div",52),v(1,"img",65),n(2,"button",54),p("click",function(){_(e);let o=l(2);return c(o.removeImage("back_id_image"))}),a(3,"\xD7"),r()()}if(u&2){let e=l(2);s(),m("src",e.user.back_id_image,x)}}function ce(u,i){if(u&1){let e=g();n(0,"div",55)(1,"input",66),p("change",function(o){_(e);let d=l(2);return c(d.onImageSelected(o,"back_id_image"))}),r(),n(2,"label",67)(3,"span",58),a(4,"\u{1F194}"),r(),n(5,"span"),a(6,"\u0627\u062E\u062A\u0631 \u0635\u0648\u0631\u0629"),r()()()}}function pe(u,i){if(u&1){let e=g();n(0,"div",59),v(1,"img",60),n(2,"button",61),p("click",function(){_(e);let o=l(2);return c(o.removePreview("back_id_image"))}),a(3,"\xD7"),r()()}if(u&2){let e=l(2);s(),m("src",e.imagePreviews.back_id_image,x)}}function ge(u,i){if(u&1){let e=g();n(0,"div",52),v(1,"img",68),n(2,"button",54),p("click",function(){_(e);let o=l(2);return c(o.removeImage("feesh_image"))}),a(3,"\xD7"),r()()}if(u&2){let e=l(2);s(),m("src",e.user.feesh_image,x)}}function fe(u,i){if(u&1){let e=g();n(0,"div",55)(1,"input",69),p("change",function(o){_(e);let d=l(2);return c(d.onImageSelected(o,"feesh_image"))}),r(),n(2,"label",70)(3,"span",58),a(4,"\u{1F4C4}"),r(),n(5,"span"),a(6,"\u0627\u062E\u062A\u0631 \u0635\u0648\u0631\u0629"),r()()()}}function ve(u,i){if(u&1){let e=g();n(0,"div",59),v(1,"img",60),n(2,"button",61),p("click",function(){_(e);let o=l(2);return c(o.removePreview("feesh_image"))}),a(3,"\xD7"),r()()}if(u&2){let e=l(2);s(),m("src",e.imagePreviews.feesh_image,x)}}function xe(u,i){if(u&1){let e=g();n(0,"div",52),v(1,"img",71),n(2,"button",54),p("click",function(){_(e);let o=l(2);return c(o.removeImage("medical_certificate_image"))}),a(3,"\xD7"),r()()}if(u&2){let e=l(2);s(),m("src",e.user.medical_certificate_image,x)}}function he(u,i){if(u&1){let e=g();n(0,"div",55)(1,"input",72),p("change",function(o){_(e);let d=l(2);return c(d.onImageSelected(o,"medical_certificate_image"))}),r(),n(2,"label",73)(3,"span",58),a(4,"\u{1F3E5}"),r(),n(5,"span"),a(6,"\u0627\u062E\u062A\u0631 \u0635\u0648\u0631\u0629"),r()()()}}function be(u,i){if(u&1){let e=g();n(0,"div",59),v(1,"img",60),n(2,"button",61),p("click",function(){_(e);let o=l(2);return c(o.removePreview("medical_certificate_image"))}),a(3,"\xD7"),r()()}if(u&2){let e=l(2);s(),m("src",e.imagePreviews.medical_certificate_image,x)}}function Ce(u,i){u&1&&(n(0,"label",74),a(1,"\u0643\u0648\u062F \u0627\u0644\u0645\u0631\u0648\u0631 "),n(2,"span",17),a(3,"*"),r()())}function we(u,i){u&1&&(n(0,"label",74),a(1,"\u0643\u0648\u062F \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062C\u062F\u064A\u062F"),r())}function ye(u,i){u&1&&(n(0,"div",51),a(1," \u0643\u0648\u062F \u0627\u0644\u0645\u0631\u0648\u0631 \u0645\u0637\u0644\u0648\u0628 "),r())}function Me(u,i){u&1&&(n(0,"small",75),a(1,"\u0627\u062A\u0631\u0643\u0647 \u0641\u0627\u0631\u063A\u0627\u064B \u0625\u0630\u0627 \u0643\u0646\u062A \u0644\u0627 \u062A\u0631\u064A\u062F \u062A\u063A\u064A\u064A\u0631 \u0643\u0648\u062F \u0627\u0644\u0645\u0631\u0648\u0631"),r())}function Ee(u,i){if(u&1&&(n(0,"div",76)(1,"span"),a(2,"\u26A0\uFE0F"),r(),n(3,"p"),a(4),r()()),u&2){let e=l(2);s(4),y(e.formError)}}function Fe(u,i){if(u&1){let e=g();n(0,"div")(1,"app-card",11)(2,"form",12,0),p("ngSubmit",function(){_(e);let o=l();return c(o.onSubmit())}),n(4,"div",13)(5,"h4"),a(6,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0634\u062E\u0635\u064A\u0629"),r(),n(7,"div",14)(8,"div",15)(9,"label",16),a(10,"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644 "),n(11,"span",17),a(12,"*"),r()(),n(13,"input",18),C("ngModelChange",function(o){_(e);let d=l();return b(d.user.full_name,o)||(d.user.full_name=o),c(o)}),r(),f(14,ne,2,0,"div",19),r(),n(15,"div",15)(16,"label",20),a(17,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 "),n(18,"span",17),a(19,"*"),r()(),n(20,"input",21),C("ngModelChange",function(o){_(e);let d=l();return b(d.user.username,o)||(d.user.username=o),c(o)}),r(),f(21,re,2,0,"div",19),r(),n(22,"div",15)(23,"label",22),a(24,"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0642\u0648\u0645\u064A"),r(),n(25,"input",23),C("ngModelChange",function(o){_(e);let d=l();return b(d.user.national_number,o)||(d.user.national_number=o),c(o)}),r()(),n(26,"div",15)(27,"label",24),a(28,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),r(),n(29,"input",25),C("ngModelChange",function(o){_(e);let d=l();return b(d.user.email,o)||(d.user.email=o),c(o)}),r()(),n(30,"div",15)(31,"label",26),a(32,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),r(),n(33,"input",27),C("ngModelChange",function(o){_(e);let d=l();return b(d.user.phone,o)||(d.user.phone=o),c(o)}),r()(),n(34,"div",15)(35,"label",28),a(36,"\u0627\u0644\u0648\u0631\u062F\u064A\u0629"),r(),n(37,"select",29),C("ngModelChange",function(o){_(e);let d=l();return b(d.user.shift_id,o)||(d.user.shift_id=o),c(o)}),n(38,"option",30),a(39,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0648\u0631\u062F\u064A\u0629"),r(),f(40,oe,2,2,"option",31),r()(),n(41,"div",15)(42,"label",32),a(43,"\u0627\u0644\u0631\u0627\u062A\u0628 \u0627\u0644\u0623\u0633\u0627\u0633\u064A"),r(),n(44,"input",33),C("ngModelChange",function(o){_(e);let d=l();return b(d.user.base_salary,o)||(d.user.base_salary=o),c(o)}),r()(),n(45,"div",15)(46,"label",34),a(47,"\u0623\u064A\u0627\u0645 \u0627\u0644\u0625\u062C\u0627\u0632\u0629 \u0627\u0644\u0631\u0633\u0645\u064A\u0629 \u0641\u064A \u0627\u0644\u0634\u0647\u0631"),r(),n(48,"input",35),C("ngModelChange",function(o){_(e);let d=l();return b(d.user.official_off_days_per_month,o)||(d.user.official_off_days_per_month=o),c(o)}),r()()()(),n(49,"div",13)(50,"h4"),a(51,"\u0627\u0644\u0635\u0648\u0631 \u0648\u0627\u0644\u0648\u062B\u0627\u0626\u0642"),r(),n(52,"div",36)(53,"div",37)(54,"h5"),a(55,"\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),r(),n(56,"div",38),f(57,ue,4,1,"div",39)(58,ae,7,0,"div",40)(59,se,4,1,"div",41),r()(),n(60,"div",37)(61,"h5"),a(62,"\u0635\u0648\u0631\u0629 \u0627\u0644\u0647\u0648\u064A\u0629 \u0627\u0644\u0623\u0645\u0627\u0645\u064A\u0629"),r(),n(63,"div",38),f(64,me,4,1,"div",39)(65,le,7,0,"div",40)(66,de,4,1,"div",41),r()(),n(67,"div",37)(68,"h5"),a(69,"\u0635\u0648\u0631\u0629 \u0627\u0644\u0647\u0648\u064A\u0629 \u0627\u0644\u062E\u0644\u0641\u064A\u0629"),r(),n(70,"div",38),f(71,_e,4,1,"div",39)(72,ce,7,0,"div",40)(73,pe,4,1,"div",41),r()(),n(74,"div",37)(75,"h5"),a(76,"\u0635\u0648\u0631\u0629 \u0627\u0644\u0641\u064A\u0634"),r(),n(77,"div",38),f(78,ge,4,1,"div",39)(79,fe,7,0,"div",40)(80,ve,4,1,"div",41),r()(),n(81,"div",37)(82,"h5"),a(83,"\u0627\u0644\u0634\u0647\u0627\u062F\u0629 \u0627\u0644\u0637\u0628\u064A\u0629"),r(),n(84,"div",38),f(85,xe,4,1,"div",39)(86,he,7,0,"div",40)(87,be,4,1,"div",41),r()()()(),n(88,"div",13)(89,"h4"),a(90,"\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u062D\u0633\u0627\u0628"),r(),n(91,"div",14)(92,"div",15),f(93,Ce,4,0,"label",42)(94,we,2,0,"label",42),n(95,"input",43),C("ngModelChange",function(o){_(e);let d=l();return b(d.user.passcode,o)||(d.user.passcode=o),c(o)}),r(),f(96,ye,2,0,"div",19)(97,Me,2,0,"small",44),r(),n(98,"div",15)(99,"label",45)(100,"input",46),C("ngModelChange",function(o){_(e);let d=l();return b(d.user.is_active,o)||(d.user.is_active=o),c(o)}),r(),n(101,"span"),a(102,"\u0627\u0644\u062D\u0633\u0627\u0628 \u0646\u0634\u0637"),r()()()()(),n(103,"div",47)(104,"app-button",48),a(105),r(),n(106,"app-button",49),p("btnClick",function(){_(e);let o=l();return c(o.goBack())}),a(107," \u0625\u0644\u063A\u0627\u0621 "),r()(),f(108,Ee,5,1,"div",50),r()()()}if(u&2){let e=P(3),t=l();s(),m("title","\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645")("subtitle",t.userId?"\u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645":"\u0625\u062F\u062E\u0627\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0627\u0644\u062C\u062F\u064A\u062F"),s(12),E("is-invalid",t.submitted&&e.controls.full_name.errors),h("ngModel",t.user.full_name),s(),m("ngIf",t.submitted&&(e.controls.full_name==null?null:e.controls.full_name.errors)),s(6),E("is-invalid",t.submitted&&e.controls.username.errors),h("ngModel",t.user.username),s(),m("ngIf",t.submitted&&(e.controls.username==null?null:e.controls.username.errors)),s(4),h("ngModel",t.user.national_number),s(4),h("ngModel",t.user.email),s(4),h("ngModel",t.user.phone),s(4),h("ngModel",t.user.shift_id),s(),m("ngValue",null),s(2),m("ngForOf",t.shifts),s(4),h("ngModel",t.user.base_salary),s(4),h("ngModel",t.user.official_off_days_per_month),s(9),m("ngIf",t.user.reference_image&&!t.imagePreviews.reference_image),s(),m("ngIf",!t.user.reference_image&&!t.imagePreviews.reference_image),s(),m("ngIf",t.imagePreviews.reference_image),s(5),m("ngIf",t.user.front_id_image&&!t.imagePreviews.front_id_image),s(),m("ngIf",!t.user.front_id_image&&!t.imagePreviews.front_id_image),s(),m("ngIf",t.imagePreviews.front_id_image),s(5),m("ngIf",t.user.back_id_image&&!t.imagePreviews.back_id_image),s(),m("ngIf",!t.user.back_id_image&&!t.imagePreviews.back_id_image),s(),m("ngIf",t.imagePreviews.back_id_image),s(5),m("ngIf",t.user.feesh_image&&!t.imagePreviews.feesh_image),s(),m("ngIf",!t.user.feesh_image&&!t.imagePreviews.feesh_image),s(),m("ngIf",t.imagePreviews.feesh_image),s(5),m("ngIf",t.user.medical_certificate_image&&!t.imagePreviews.medical_certificate_image),s(),m("ngIf",!t.user.medical_certificate_image&&!t.imagePreviews.medical_certificate_image),s(),m("ngIf",t.imagePreviews.medical_certificate_image),s(6),m("ngIf",!t.userId),s(),m("ngIf",t.userId),s(),E("is-invalid",t.submitted&&e.controls.passcode.errors),h("ngModel",t.user.passcode),m("required",!t.userId),s(),m("ngIf",t.submitted&&e.controls.passcode.errors),s(),m("ngIf",t.userId),s(3),h("ngModel",t.user.is_active),s(4),m("loading",t.saving)("disabled",!e.form.valid||t.saving),s(),F(" ",t.userId?"\u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A":"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"," "),s(),m("disabled",t.saving),s(2),m("ngIf",t.formError)}}var ee=class u{constructor(i,e,t){this.route=i;this.router=e;this.sb=t}user={full_name:"",username:"",national_number:"",email:"",phone:"",shift_id:null,base_salary:0,official_off_days_per_month:0,passcode:"",is_active:!0,reference_image:null,front_id_image:null,back_id_image:null,feesh_image:null,medical_certificate_image:null};shifts=[];userId=null;loading=!1;saving=!1;submitted=!1;error="";formError="";imagePreviews={reference_image:null,front_id_image:null,back_id_image:null,feesh_image:null,medical_certificate_image:null};ngOnInit(){return w(this,null,function*(){this.userId=this.route.snapshot.paramMap.get("id"),yield this.loadShifts(),this.userId&&(yield this.loadUser())})}loadShifts(){return w(this,null,function*(){try{let{data:i}=yield this.sb.rpc("shifts_get");this.shifts=i||[]}catch(i){console.error("Error loading shifts:",i),this.shifts=[]}})}loadUser(){return w(this,null,function*(){if(this.userId)try{this.loading=!0,this.error="";let{data:i,error:e}=yield this.sb.rpc("users_get_by_id",{_id:this.userId});if(e)throw e;if(!i)throw new Error("User not found");this.user={full_name:i.full_name||"",username:i.username||"",national_number:i.national_number||"",email:i.email||"",phone:i.phone||"",shift_id:i.shift_id,base_salary:Number(i.base_salary??0),official_off_days_per_month:Number(i.official_off_days_per_month??0),passcode:"",is_active:i.is_active??!0,reference_image:i.reference_image,front_id_image:i.front_id_image,back_id_image:i.back_id_image,feesh_image:i.feesh_image,medical_certificate_image:i.medical_certificate_image}}catch(i){console.error("Error loading user:",i),this.error="\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"}finally{this.loading=!1}})}onImageSelected(i,e){let t=i.target.files[0];if(t){let o=new FileReader;o.onload=d=>{this.user[e]=null,this.imagePreviews[e]=d.target.result},o.readAsDataURL(t)}}removeImage(i){this.user[i]=null,this.imagePreviews[i]=null}removePreview(i){this.imagePreviews[i]=null}onSubmit(){return w(this,null,function*(){if(this.submitted=!0,this.formError="",!this.user.full_name?.trim()||!this.user.username?.trim()){this.formError="\u064A\u0631\u062C\u0649 \u0645\u0644\u0621 \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644 \u0648\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645";return}if(!this.userId&&!this.user.passcode?.trim()){this.formError="\u0643\u0648\u062F \u0627\u0644\u0645\u0631\u0648\u0631 \u0645\u0637\u0644\u0648\u0628 \u0644\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646 \u0627\u0644\u062C\u062F\u062F";return}try{this.saving=!0;let i={full_name:this.user.full_name.trim(),username:this.user.username.trim(),national_number:this.user.national_number?.trim()||null,email:this.user.email?.trim()||null,phone:this.user.phone?.trim()||null,shift_id:this.user.shift_id,base_salary:this.user.base_salary!==null&&this.user.base_salary!==void 0?Number(this.user.base_salary):0,official_off_days_per_month:this.user.official_off_days_per_month!==null&&this.user.official_off_days_per_month!==void 0?Number(this.user.official_off_days_per_month):0,is_active:this.user.is_active,reference_image:this.imagePreviews.reference_image||this.user.reference_image,front_id_image:this.imagePreviews.front_id_image||this.user.front_id_image,back_id_image:this.imagePreviews.back_id_image||this.user.back_id_image,feesh_image:this.imagePreviews.feesh_image||this.user.feesh_image,medical_certificate_image:this.imagePreviews.medical_certificate_image||this.user.medical_certificate_image};if(this.user.passcode?.trim())try{let{data:e,error:t}=yield this.sb.rpc("hash_passcode_for_storage",{p_passcode:this.user.passcode.trim()});if(t)throw console.error("Error hashing passcode:",t),new Error("\u0641\u0634\u0644 \u0641\u064A \u062A\u0634\u0641\u064A\u0631 \u0643\u0648\u062F \u0627\u0644\u0645\u0631\u0648\u0631");i.passcode=e}catch(e){throw console.error("Exception hashing passcode:",e),new Error("\u0641\u0634\u0644 \u0641\u064A \u062A\u0634\u0641\u064A\u0631 \u0643\u0648\u062F \u0627\u0644\u0645\u0631\u0648\u0631")}if(this.userId){let{error:e}=yield this.sb.rpc("users_update",{_id:this.userId,_username:i.username,_full_name:i.full_name,_national_number:i.national_number,_email:i.email,_phone:i.phone,_is_active:i.is_active,_shift_id:i.shift_id,_reference_image:i.reference_image,_front_id_image:i.front_id_image,_back_id_image:i.back_id_image,_feesh_image:i.feesh_image,_medical_certificate_image:i.medical_certificate_image,_base_salary:i.base_salary,_official_off_days_per_month:i.official_off_days_per_month,_passcode:i.passcode});if(e)throw e}else{let{error:e}=yield this.sb.rpc("users_insert",{_username:i.username,_full_name:i.full_name,_national_number:i.national_number,_email:i.email,_phone:i.phone,_is_active:i.is_active,_shift_id:i.shift_id,_reference_image:i.reference_image,_front_id_image:i.front_id_image,_back_id_image:i.back_id_image,_feesh_image:i.feesh_image,_medical_certificate_image:i.medical_certificate_image,_base_salary:i.base_salary,_official_off_days_per_month:i.official_off_days_per_month,_passcode:i.passcode});if(e)throw e}this.router.navigate(["/users"])}catch(i){console.error("Error saving user:",i),this.formError=this.userId?"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645":"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"}finally{this.saving=!1}})}goBack(){this.router.navigate(["/users"])}static \u0275fac=function(e){return new(e||u)(M(k),M(U),M(T))};static \u0275cmp=S({type:u,selectors:[["app-users-form"]],decls:11,vars:6,consts:[["userForm","ngForm"],[1,"page-header"],[1,"header-content"],[1,"page-subtitle"],["variant","outline",3,"btnClick","disabled"],["message","\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645...",3,"overlay",4,"ngIf"],["class","error-message",4,"ngIf"],[4,"ngIf"],["message","\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645...",3,"overlay"],[1,"error-message"],["variant","outline","size","sm",3,"btnClick"],[3,"title","subtitle"],[1,"user-form",3,"ngSubmit"],[1,"form-section"],[1,"form-grid"],[1,"form-group"],["for","full_name"],[1,"required"],["type","text","id","full_name","name","full_name","required","","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644",1,"form-control",3,"ngModelChange","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","username"],["type","text","id","username","name","username","required","","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645",1,"form-control",3,"ngModelChange","ngModel"],["for","national_number"],["type","text","id","national_number","name","national_number","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0642\u0648\u0645\u064A",1,"form-control",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",1,"form-control",3,"ngModelChange","ngModel"],["for","phone"],["type","tel","id","phone","name","phone","placeholder","\u0623\u062F\u062E\u0644 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641",1,"form-control",3,"ngModelChange","ngModel"],["for","shift_id"],["id","shift_id","name","shift_id",1,"form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","base_salary"],["type","number","id","base_salary","name","base_salary","min","0","step","0.01","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0644\u0631\u0627\u062A\u0628 \u0627\u0644\u0623\u0633\u0627\u0633\u064A",1,"form-control",3,"ngModelChange","ngModel"],["for","official_off_days_per_month"],["type","number","id","official_off_days_per_month","name","official_off_days_per_month","min","0","max","31","placeholder","\u0623\u062F\u062E\u0644 \u0639\u062F\u062F \u0623\u064A\u0627\u0645 \u0627\u0644\u0625\u062C\u0627\u0632\u0629",1,"form-control",3,"ngModelChange","ngModel"],[1,"documents-grid"],[1,"document-section"],[1,"image-upload-section"],["class","current-image",4,"ngIf"],["class","image-upload",4,"ngIf"],["class","image-preview",4,"ngIf"],["for","passcode",4,"ngIf"],["type","password","id","passcode","name","passcode","placeholder","\u0623\u062F\u062E\u0644 \u0643\u0648\u062F \u0627\u0644\u0645\u0631\u0648\u0631",1,"form-control",3,"ngModelChange","ngModel","required"],["class","form-hint",4,"ngIf"],[1,"checkbox"],["type","checkbox","name","is_active",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit","variant","primary",3,"loading","disabled"],["type","button","variant","outline",3,"btnClick","disabled"],["class","form-error",4,"ngIf"],[1,"invalid-feedback"],[1,"current-image"],["alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0627\u0644\u062D\u0627\u0644\u064A\u0629",1,"document-image",3,"src"],["type","button",1,"remove-image-btn",3,"click"],[1,"image-upload"],["type","file","id","referenceImageUpload","accept","image/*",2,"display","none",3,"change"],["for","referenceImageUpload",1,"upload-label"],[1,"upload-icon"],[1,"image-preview"],["alt","\u0645\u0639\u0627\u064A\u0646\u0629 \u0627\u0644\u0635\u0648\u0631\u0629",1,"preview-image",3,"src"],["type","button",1,"remove-preview-btn",3,"click"],["alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0647\u0648\u064A\u0629 \u0627\u0644\u0623\u0645\u0627\u0645\u064A\u0629",1,"document-image",3,"src"],["type","file","id","frontIdImageUpload","accept","image/*",2,"display","none",3,"change"],["for","frontIdImageUpload",1,"upload-label"],["alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0647\u0648\u064A\u0629 \u0627\u0644\u062E\u0644\u0641\u064A\u0629",1,"document-image",3,"src"],["type","file","id","backIdImageUpload","accept","image/*",2,"display","none",3,"change"],["for","backIdImageUpload",1,"upload-label"],["alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0641\u064A\u0634",1,"document-image",3,"src"],["type","file","id","feeshImageUpload","accept","image/*",2,"display","none",3,"change"],["for","feeshImageUpload",1,"upload-label"],["alt","\u0627\u0644\u0634\u0647\u0627\u062F\u0629 \u0627\u0644\u0637\u0628\u064A\u0629",1,"document-image",3,"src"],["type","file","id","medicalCertificateImageUpload","accept","image/*",2,"display","none",3,"change"],["for","medicalCertificateImageUpload",1,"upload-label"],["for","passcode"],[1,"form-hint"],[1,"form-error"]],template:function(e,t){e&1&&(n(0,"div",1)(1,"div",2)(2,"h1"),a(3),r(),n(4,"p",3),a(5),r()(),n(6,"app-button",4),p("btnClick",function(){return t.goBack()}),a(7," \u2190 \u0631\u062C\u0648\u0639 \u0644\u0644\u0642\u0627\u0626\u0645\u0629 "),r()(),f(8,te,1,1,"app-spinner",5)(9,ie,7,1,"div",6)(10,Fe,109,47,"div",7)),e&2&&(s(3),y(t.userId?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062A\u062E\u062F\u0645 \u062C\u062F\u064A\u062F"),s(2),y(t.userId?"\u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0627\u0644\u0645\u062D\u062F\u062F":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062A\u062E\u062F\u0645 \u062C\u062F\u064A\u062F \u0644\u0644\u0646\u0638\u0627\u0645"),s(),m("disabled",t.saving),s(2),m("ngIf",t.loading),s(),m("ngIf",t.error&&!t.loading),s(),m("ngIf",!t.loading&&!t.error))},dependencies:[V,A,I,Q,R,Y,G,W,j,D,q,z,N,K,J,H,L,B,O,Z,X,$],styles:['.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem;gap:1rem}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--color-primary-dark);font-size:1.8rem}.page-subtitle[_ngcontent-%COMP%]{margin:0;color:var(--muted-text);font-size:1rem}.user-form[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:0 1rem}.form-section[_ngcontent-%COMP%]{border:1px solid var(--border-color);border-radius:12px;padding:2rem;background:#fff;margin-bottom:2.5rem;box-shadow:0 2px 8px #0000000d;transition:all .3s ease;width:100%;box-sizing:border-box;overflow:hidden}.form-section[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #00000014}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:var(--color-primary-dark);font-size:1.2rem;font-weight:600;border-bottom:2px solid var(--color-primary);padding-bottom:.75rem;position:relative}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;width:50px;height:2px;background:var(--color-primary)}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:3rem;align-items:start}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;flex-direction:column;min-width:0;width:100%}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}label[_ngcontent-%COMP%]{display:block;margin-bottom:.75rem;font-weight:600;color:var(--text-color);font-size:.95rem}.required[_ngcontent-%COMP%]{color:#dc3545;font-weight:700}.form-control[_ngcontent-%COMP%]{width:100%;padding:1rem 1.25rem;border:2px solid var(--border-color);border-radius:8px;font-size:1rem;line-height:1.5;background:#fff;transition:all .3s ease;box-shadow:0 1px 3px #0000000d;box-sizing:border-box;min-width:0}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #f6b81926;transform:translateY(-1px)}.form-control[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);box-shadow:0 2px 8px #0000001a}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;box-shadow:0 0 0 3px #dc354526}.invalid-feedback[_ngcontent-%COMP%]{width:100%;margin-top:.5rem;font-size:.875em;color:#dc3545;font-weight:500}.form-hint[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:.8rem;color:var(--muted-text)}.checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin:0}.documents-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:2rem;margin-top:1rem}.document-section[_ngcontent-%COMP%]{border:2px solid var(--border-color);border-radius:12px;padding:1.5rem;background:#fff;box-shadow:0 2px 8px #0000000d;transition:all .3s ease;position:relative}.document-section[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);box-shadow:0 4px 16px #0000001a;transform:translateY(-2px)}.document-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 1.25rem;color:var(--color-primary-dark);font-size:1rem;font-weight:600;text-align:center;padding-bottom:.5rem;border-bottom:1px solid var(--border-color)}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem;align-items:center}.current-image[_ngcontent-%COMP%], .image-preview[_ngcontent-%COMP%]{position:relative;display:inline-block;margin:0 auto}.user-image[_ngcontent-%COMP%], .document-image[_ngcontent-%COMP%], .preview-image[_ngcontent-%COMP%]{width:140px;height:140px;object-fit:cover;border-radius:12px;border:3px solid var(--border-color);box-shadow:0 4px 12px #0000001a;transition:all .3s ease}.user-image[_ngcontent-%COMP%]:hover, .document-image[_ngcontent-%COMP%]:hover, .preview-image[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 20px #00000026}.remove-image-btn[_ngcontent-%COMP%], .remove-preview-btn[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-10px;width:28px;height:28px;border-radius:50%;background:#dc3545;color:#fff;border:2px solid white;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:700;box-shadow:0 2px 8px #0003;transition:all .3s ease}.remove-image-btn[_ngcontent-%COMP%]:hover, .remove-preview-btn[_ngcontent-%COMP%]:hover{background:#c82333;transform:scale(1.1)}.upload-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:140px;height:140px;border:3px dashed var(--border-color);border-radius:12px;cursor:pointer;transition:all .3s ease;background:#f8f9fa;box-shadow:0 2px 8px #0000000d}.upload-label[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);background:#f6b8191a;transform:translateY(-2px);box-shadow:0 4px 16px #0000001a}.upload-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:.75rem;color:var(--muted-text)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1.5rem;justify-content:flex-end;margin-top:3rem;padding:2rem;background:#f8f9fa;border-radius:12px;border:1px solid var(--border-color)}.error-message[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fee,#fdd);border:2px solid #fcc;border-radius:12px;padding:1.5rem;margin-bottom:2rem;display:flex;align-items:center;gap:1rem;box-shadow:0 4px 12px #dc35451a}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#c62828;flex:1;font-weight:500}.form-error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fee,#fdd);border:2px solid #fcc;border-radius:12px;padding:1.5rem;display:flex;align-items:center;gap:1rem;color:#c62828;margin-top:2rem;box-shadow:0 4px 12px #dc35451a}@media (max-width: 768px){.user-form[_ngcontent-%COMP%]{padding:0 .5rem}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;margin-bottom:1.5rem}.form-section[_ngcontent-%COMP%]{padding:1.5rem;margin-bottom:2rem}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:2rem}.documents-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.document-section[_ngcontent-%COMP%]{padding:1.25rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:1.5rem;margin-top:2rem}.user-image[_ngcontent-%COMP%], .document-image[_ngcontent-%COMP%], .preview-image[_ngcontent-%COMP%], .upload-label[_ngcontent-%COMP%]{width:120px;height:120px}}@media (max-width: 480px){.form-section[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1.5rem}.document-section[_ngcontent-%COMP%], .form-actions[_ngcontent-%COMP%]{padding:1rem}.user-image[_ngcontent-%COMP%], .document-image[_ngcontent-%COMP%], .preview-image[_ngcontent-%COMP%], .upload-label[_ngcontent-%COMP%]{width:100px;height:100px}}']})};export{ee as UsersFormComponent};
