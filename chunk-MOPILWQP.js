import{a as G}from"./chunk-D5K5DWKF.js";import{a as L}from"./chunk-VJJD6Q4W.js";import{c as R,d as k,e as D,f as V,g as T,h as N,o as z,p as B,q as W,r as j}from"./chunk-OVLE5S5M.js";import"./chunk-VRPC7EEM.js";import"./chunk-X5YLR3NI.js";import{$ as u,B as v,C as M,Ca as w,G as g,Ia as I,Ka as q,M as m,N as r,O as n,Oa as E,P as A,S as C,T as f,U as l,X as F,Z as b,aa as _,ba as P,da as h,ea as S,fa as y,n as d,o as c,xa as O,z as i}from"./chunk-JMF3YSV7.js";import{i as x}from"./chunk-ODN5LVDJ.js";function J(o,a){o&1&&A(0,"app-spinner",8),o&2&&m("overlay",!1)}function K(o,a){if(o&1){let e=C();r(0,"div",9)(1,"span"),u(2,"\u26A0\uFE0F"),n(),r(3,"p"),u(4),n(),r(5,"app-button",10),f("btnClick",function(){d(e);let s=l();return c(s.loadStatus())}),u(6,"\u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629"),n()()}if(o&2){let e=l();i(4),_(e.error)}}function Q(o,a){o&1&&(r(0,"div",26),u(1," \u0627\u0644\u0643\u0648\u062F \u0645\u0637\u0644\u0648\u0628 "),n())}function U(o,a){o&1&&(r(0,"div",26),u(1," \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A \u0645\u0637\u0644\u0648\u0628 "),n())}function X(o,a){if(o&1&&(r(0,"div",27)(1,"span"),u(2,"\u26A0\uFE0F"),n(),r(3,"p"),u(4),n()()),o&2){let e=l(2);i(4),_(e.formError)}}function Y(o,a){if(o&1){let e=C();r(0,"div")(1,"app-card",11)(2,"form",12,0),f("ngSubmit",function(){d(e);let s=l();return c(s.onSubmit())}),r(4,"div",13)(5,"h4"),u(6,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629"),n(),r(7,"div",14)(8,"label",15),u(9,"\u0627\u0644\u0643\u0648\u062F "),r(10,"span",16),u(11,"*"),n()(),r(12,"input",17),y("ngModelChange",function(s){d(e);let p=l();return S(p.status.code,s)||(p.status.code=s),c(s)}),n(),g(13,Q,2,0,"div",18),r(14,"small",19),u(15,"\u0643\u0648\u062F \u0641\u0631\u064A\u062F \u0644\u0644\u062D\u0627\u0644\u0629 (\u0644\u0627 \u064A\u0645\u0643\u0646 \u062A\u063A\u064A\u064A\u0631\u0647 \u0628\u0639\u062F \u0627\u0644\u0625\u0646\u0634\u0627\u0621)"),n()(),r(16,"div",14)(17,"label",20),u(18,"\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064A "),r(19,"span",16),u(20,"*"),n()(),r(21,"input",21),y("ngModelChange",function(s){d(e);let p=l();return S(p.status.name_ar,s)||(p.status.name_ar=s),c(s)}),n(),g(22,U,2,0,"div",18),n()(),r(23,"div",22)(24,"app-button",23),u(25),n(),r(26,"app-button",24),f("btnClick",function(){d(e);let s=l();return c(s.goBack())}),u(27," \u0625\u0644\u063A\u0627\u0621 "),n()(),g(28,X,5,1,"div",25),n()()()}if(o&2){let e=F(3),t=l();i(),m("title","\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062D\u0627\u0644\u0629")("subtitle",t.statusId?"\u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062D\u0627\u0644\u0629":"\u0625\u062F\u062E\u0627\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062D\u0627\u0644\u0629 \u0627\u0644\u062C\u062F\u064A\u062F\u0629"),i(11),b("is-invalid",t.submitted&&e.controls.code.errors),h("ngModel",t.status.code),m("readonly",!!t.statusId),i(),m("ngIf",t.submitted&&(e.controls.code==null?null:e.controls.code.errors)),i(8),b("is-invalid",t.submitted&&e.controls.name_ar.errors),h("ngModel",t.status.name_ar),i(),m("ngIf",t.submitted&&(e.controls.name_ar==null?null:e.controls.name_ar.errors)),i(2),m("loading",t.saving)("disabled",!e.form.valid||t.saving),i(),P(" ",t.statusId?"\u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A":"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u062D\u0627\u0644\u0629"," "),i(),m("disabled",t.saving),i(2),m("ngIf",t.formError)}}var H=class o{constructor(a,e,t){this.route=a;this.router=e;this.requestStatusService=t}status={code:"",name_ar:""};statusId=null;loading=!1;saving=!1;submitted=!1;error="";formError="";ngOnInit(){this.statusId=this.route.snapshot.paramMap.get("id"),this.statusId&&this.loadStatus()}loadStatus(){return x(this,null,function*(){if(this.statusId)try{this.loading=!0,this.error="",this.status=yield this.requestStatusService.getById(this.statusId)}catch(a){console.error("Error loading status:",a),this.error="\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062D\u0627\u0644\u0629"}finally{this.loading=!1}})}onSubmit(){return x(this,null,function*(){if(this.submitted=!0,this.formError="",!this.status.code||!this.status.name_ar){this.formError="\u064A\u0631\u062C\u0649 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629";return}try{this.saving=!0;let a={code:this.status.code,name_ar:this.status.name_ar};this.statusId?yield this.requestStatusService.update(this.statusId,a):yield this.requestStatusService.create(a),this.router.navigate(["/request-statuses"])}catch(a){console.error("Error saving status:",a),this.formError=this.statusId?"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062D\u0627\u0644\u0629":"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u062D\u0627\u0644\u0629"}finally{this.saving=!1}})}goBack(){this.router.navigate(["/request-statuses"])}static \u0275fac=function(e){return new(e||o)(v(I),v(q),v(G))};static \u0275cmp=M({type:o,selectors:[["app-request-status-form"]],decls:11,vars:6,consts:[["statusForm","ngForm"],[1,"page-header"],[1,"header-content"],[1,"page-subtitle"],["variant","outline",3,"btnClick","disabled"],["message","\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062D\u0627\u0644\u0629...",3,"overlay",4,"ngIf"],["class","error-message",4,"ngIf"],[4,"ngIf"],["message","\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062D\u0627\u0644\u0629...",3,"overlay"],[1,"error-message"],["variant","outline","size","sm",3,"btnClick"],[3,"title","subtitle"],[1,"status-form",3,"ngSubmit"],[1,"form-section"],[1,"form-group"],["for","code"],[1,"required"],["type","text","id","code","name","code","required","","placeholder","\u0623\u062F\u062E\u0644 \u0643\u0648\u062F \u0627\u0644\u062D\u0627\u0644\u0629",1,"form-control",3,"ngModelChange","ngModel","readonly"],["class","invalid-feedback",4,"ngIf"],[1,"form-hint"],["for","name_ar"],["type","text","id","name_ar","name","name_ar","required","","placeholder","\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u062D\u0627\u0644\u0629 \u0628\u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit","variant","primary",3,"loading","disabled"],["type","button","variant","outline",3,"btnClick","disabled"],["class","form-error",4,"ngIf"],[1,"invalid-feedback"],[1,"form-error"]],template:function(e,t){e&1&&(r(0,"div",1)(1,"div",2)(2,"h1"),u(3),n(),r(4,"p",3),u(5),n()(),r(6,"app-button",4),f("btnClick",function(){return t.goBack()}),u(7," \u2190 \u0631\u062C\u0648\u0639 \u0644\u0644\u0642\u0627\u0626\u0645\u0629 "),n()(),g(8,J,1,1,"app-spinner",5)(9,K,7,1,"div",6)(10,Y,29,16,"div",7)),e&2&&(i(3),_(t.statusId?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062D\u0627\u0644\u0629":"\u0625\u0636\u0627\u0641\u0629 \u062D\u0627\u0644\u0629 \u062C\u062F\u064A\u062F\u0629"),i(2),_(t.statusId?"\u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u062D\u062F\u062F\u0629":"\u0625\u0636\u0627\u0641\u0629 \u062D\u0627\u0644\u0629 \u0637\u0644\u0628 \u062C\u062F\u064A\u062F\u0629 \u0644\u0644\u0646\u0638\u0627\u0645"),i(),m("disabled",t.saving),i(2),m("ngIf",t.loading),i(),m("ngIf",t.error&&!t.loading),i(),m("ngIf",!t.loading&&!t.error))},dependencies:[w,O,B,N,R,k,D,z,T,V,E,j,W,L],styles:[".page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem;gap:1rem}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--color-primary-dark);font-size:1.8rem}.page-subtitle[_ngcontent-%COMP%]{margin:0;color:var(--muted-text);font-size:1rem}.status-form[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-bottom:2rem}.form-section[_ngcontent-%COMP%]{border:1px solid var(--border-color);border-radius:8px;padding:1.5rem;background:#fafafa}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--color-primary-dark);font-size:1.1rem;border-bottom:1px solid var(--border-color);padding-bottom:.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:var(--text-color)}.required[_ngcontent-%COMP%]{color:#dc3545}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid var(--border-color);border-radius:6px;font-size:1rem;line-height:1.5;background:#fff;transition:all .2s ease}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px #f6b81933}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;box-shadow:0 0 0 2px #dc354533}.invalid-feedback[_ngcontent-%COMP%]{width:100%;margin-top:.25rem;font-size:.875em;color:#dc3545}.form-hint[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:.8rem;color:var(--muted-text)}.color-input-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.color-picker[_ngcontent-%COMP%]{width:50px;height:40px;border:1px solid var(--border-color);border-radius:6px;cursor:pointer}.color-text[_ngcontent-%COMP%]{flex:1;font-family:monospace}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;font-weight:500}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;accent-color:var(--color-primary)}.preview-container[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);border-radius:8px;padding:1rem}.preview-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.preview-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0;font-weight:600;color:var(--text-color)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem;padding-top:1rem;border-top:1px solid var(--border-color)}.error-message[_ngcontent-%COMP%]{background:#fee;border:1px solid #fcc;border-radius:8px;padding:1rem;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.2rem}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#c62828;flex:1}.form-error[_ngcontent-%COMP%]{background:#fee;border:1px solid #fcc;border-radius:6px;padding:1rem;display:flex;align-items:center;gap:.5rem;color:#c62828;margin-top:1rem}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.form-section[_ngcontent-%COMP%]{padding:1rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.preview-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}}"]})};export{H as RequestStatusFormComponent};
