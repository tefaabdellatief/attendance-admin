import{a as H}from"./chunk-LC3RXJFZ.js";import{a as B}from"./chunk-WMZDVTJT.js";import{a as q}from"./chunk-VJJD6Q4W.js";import{d as z,g as U,k as W,l as j,p as Q,q as $,r as R}from"./chunk-OVLE5S5M.js";import{a as N}from"./chunk-VRPC7EEM.js";import"./chunk-X5YLR3NI.js";import{$ as r,B as S,C as E,Ca as L,G as _,Ka as I,M as l,N as i,O as n,Oa as V,P as O,S as b,T as c,U as m,Z as y,aa as h,ba as g,da as P,ea as T,fa as k,n as p,o as f,wa as F,xa as D,z as u}from"./chunk-JMF3YSV7.js";import{a as A,i as v}from"./chunk-ODN5LVDJ.js";function Z(s,o){s&1&&O(0,"app-spinner",19),s&2&&l("overlay",!1)}function ee(s,o){if(s&1){let e=b();i(0,"div",20)(1,"span"),r(2,"\u26A0\uFE0F"),n(),i(3,"p"),r(4),n(),i(5,"app-button",21),c("btnClick",function(){p(e);let a=m();return f(a.loadShifts())}),r(6,"\u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629"),n()()}if(s&2){let e=m();u(4),h(e.error)}}function te(s,o){if(s&1){let e=b();i(0,"tr")(1,"td",29)(2,"span",30),r(3),n()(),i(4,"td",31)(5,"span",32),r(6),n()(),i(7,"td",33)(8,"span",34),r(9),n()(),i(10,"td",35)(11,"span",32),r(12),n()(),i(13,"td",36)(14,"span",37),r(15),n()(),i(16,"td",36)(17,"span",37),r(18),n()(),i(19,"td",38)(20,"div",39)(21,"app-button",40),c("btnClick",function(){let a=p(e).$implicit,d=m(3);return f(d.viewShift(a))}),r(22," \u{1F441}\uFE0F \u0639\u0631\u0636 "),n(),i(23,"app-button",41),c("btnClick",function(){let a=p(e).$implicit,d=m(3);return f(d.editShift(a))}),r(24," \u270F\uFE0F \u062A\u0639\u062F\u064A\u0644 "),n(),i(25,"app-button",42),c("btnClick",function(){let a=p(e).$implicit,d=m(3);return f(d.deleteShift(a))}),r(26," \u{1F5D1}\uFE0F \u062D\u0630\u0641 "),n()()()()}if(s&2){let e=o.$implicit,t=m(3);u(3),h(e.name),u(3),h(e.start_time),u(3),g("",e.duration_hours," \u0633\u0627\u0639\u0629"),u(3),h(t.computeEndTime(e.start_time,e.duration_hours)),u(3),g("",e.checkin_grace_minutes??0," \u062F\u0642\u064A\u0642\u0629"),u(3),g("",e.checkout_grace_minutes??0," \u062F\u0642\u064A\u0642\u0629"),u(3),l("disabled",t.saving),u(2),l("disabled",t.saving),u(2),l("disabled",t.saving)}}function ie(s,o){if(s&1&&(i(0,"app-card",25)(1,"div",26)(2,"table",27)(3,"thead")(4,"tr")(5,"th"),r(6,"\u0627\u0644\u0627\u0633\u0645"),n(),i(7,"th"),r(8,"\u0648\u0642\u062A \u0627\u0644\u0628\u062F\u0627\u064A\u0629"),n(),i(9,"th"),r(10,"\u0639\u062F\u062F \u0627\u0644\u0633\u0627\u0639\u0627\u062A"),n(),i(11,"th"),r(12,"\u0648\u0642\u062A \u0627\u0644\u0646\u0647\u0627\u064A\u0629"),n(),i(13,"th"),r(14,"\u0633\u0645\u0627\u062D \u0627\u0644\u062F\u062E\u0648\u0644"),n(),i(15,"th"),r(16,"\u0633\u0645\u0627\u062D \u0627\u0644\u062E\u0631\u0648\u062C"),n(),i(17,"th"),r(18,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),n()()(),i(19,"tbody"),_(20,te,27,9,"tr",28),n()()()()),s&2){let e=m(2);l("title","\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0648\u0631\u062F\u064A\u0627\u062A")("subtitle","\u0625\u062C\u0645\u0627\u0644\u064A "+e.filteredShifts.length+" \u0648\u0631\u062F\u064A\u0629"),u(20),l("ngForOf",e.filteredShifts)}}function ne(s,o){s&1&&(i(0,"p"),r(1,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0648\u0631\u062F\u064A\u0627\u062A \u062A\u0637\u0627\u0628\u0642 \u0627\u0644\u0628\u062D\u062B \u0627\u0644\u0645\u062D\u062F\u062F"),n())}function re(s,o){s&1&&(i(0,"p"),r(1,"\u0644\u0645 \u064A\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0623\u064A \u0648\u0631\u062F\u064A\u0627\u062A \u0628\u0639\u062F"),n())}function oe(s,o){if(s&1){let e=b();i(0,"app-button",47),c("btnClick",function(){p(e);let a=m(3);return f(a.navigateToNew())}),r(1," \u0625\u0636\u0627\u0641\u0629 \u0623\u0648\u0644 \u0648\u0631\u062F\u064A\u0629 "),n()}}function ue(s,o){if(s&1&&(i(0,"div",43)(1,"div",44),r(2,"\u23F0"),n(),i(3,"h3"),r(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0648\u0631\u062F\u064A\u0627\u062A"),n(),_(5,ne,2,0,"p",45)(6,re,2,0,"p",45)(7,oe,2,0,"app-button",46),n()),s&2){let e=m(2);u(5),l("ngIf",e.searchQuery),u(),l("ngIf",!e.searchQuery),u(),l("ngIf",!e.searchQuery)}}function se(s,o){if(s&1&&(i(0,"div",22),_(1,ie,21,3,"app-card",23)(2,ue,8,3,"div",24),n()),s&2){let e=m();u(),l("ngIf",e.filteredShifts.length),u(),l("ngIf",!e.filteredShifts.length)}}function ae(s,o){if(s&1&&(i(0,"div",48)(1,"div",49)(2,"h4"),r(3,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0648\u0631\u062F\u064A\u0629"),n(),i(4,"div",50)(5,"div",51)(6,"label"),r(7,"\u0627\u0644\u0627\u0633\u0645:"),n(),i(8,"span"),r(9),n()(),i(10,"div",51)(11,"label"),r(12,"\u0648\u0642\u062A \u0627\u0644\u0628\u062F\u0627\u064A\u0629:"),n(),i(13,"span",32),r(14),n()(),i(15,"div",51)(16,"label"),r(17,"\u0639\u062F\u062F \u0627\u0644\u0633\u0627\u0639\u0627\u062A:"),n(),i(18,"span"),r(19),n()(),i(20,"div",51)(21,"label"),r(22,"\u0648\u0642\u062A \u0627\u0644\u0646\u0647\u0627\u064A\u0629:"),n(),i(23,"span",32),r(24),n()(),i(25,"div",51)(26,"label"),r(27,"\u0633\u0645\u0627\u062D \u0627\u0644\u062F\u062E\u0648\u0644:"),n(),i(28,"span"),r(29),n()(),i(30,"div",51)(31,"label"),r(32,"\u0633\u0645\u0627\u062D \u0627\u0644\u062E\u0631\u0648\u062C:"),n(),i(33,"span"),r(34),n()()()()()),s&2){let e=m();u(9),h(e.selectedShift.name),u(5),h(e.selectedShift.start_time),u(5),g("",e.selectedShift.duration_hours," \u0633\u0627\u0639\u0629"),u(5),h(e.computeEndTime(e.selectedShift.start_time,e.selectedShift.duration_hours)),u(5),g("",e.selectedShift.checkin_grace_minutes??0," \u062F\u0642\u064A\u0642\u0629"),u(5),g("",e.selectedShift.checkout_grace_minutes??0," \u062F\u0642\u064A\u0642\u0629")}}function le(s,o){if(s&1&&(i(0,"option",67),r(1),n()),s&2){let e=o.$implicit;l("value",e.id),u(),g(" ",e.name," ")}}function de(s,o){if(s&1){let e=b();i(0,"div",59)(1,"div",60)(2,"span",61),r(3),n(),i(4,"span",62),r(5),n()(),i(6,"div",63)(7,"label"),r(8,"\u0627\u0644\u0648\u0631\u062F\u064A\u0629:"),n(),i(9,"select",64),c("change",function(a){let d=p(e).$implicit,x=m(2);return f(x.onShiftChange(d,a))}),i(10,"option",65),r(11,"\u0628\u062F\u0648\u0646 \u0648\u0631\u062F\u064A\u0629"),n(),_(12,le,2,2,"option",66),n()()()}if(s&2){let e=o.$implicit,t=m(2);u(3),h(e.full_name||e.username),u(2),h(e.email),u(4),l("value",e.shift_id||"null")("disabled",t.updatingUserShifts),u(3),l("ngForOf",t.getAssignableShifts())}}function ce(s,o){s&1&&(i(0,"span"),r(1,"\u23F3"),n())}function me(s,o){s&1&&(i(0,"span"),r(1,"\u062D\u0630\u0641 \u0627\u0644\u0648\u0631\u062F\u064A\u0629"),n())}function pe(s,o){if(s&1){let e=b();i(0,"div",52),c("click",function(){p(e);let a=m();return f(a.closeUsersModal())}),i(1,"div",53),c("click",function(a){return p(e),f(a.stopPropagation())}),i(2,"div",12)(3,"h3"),r(4,"\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u0648\u0646 \u0627\u0644\u0645\u0631\u062A\u0628\u0637\u0648\u0646 \u0628\u0627\u0644\u0648\u0631\u062F\u064A\u0629"),n(),i(5,"button",54),c("click",function(){p(e);let a=m();return f(a.closeUsersModal())}),r(6,"\xD7"),n()(),i(7,"div",48)(8,"p",55),r(9,' \u0644\u0627 \u064A\u0645\u0643\u0646 \u062D\u0630\u0641 \u0627\u0644\u0648\u0631\u062F\u064A\u0629 "'),i(10,"strong"),r(11),n(),r(12,'" \u0644\u0623\u0646\u0647\u0627 \u0645\u0631\u062A\u0628\u0637\u0629 \u0628\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646 \u0627\u0644\u062A\u0627\u0644\u064A\u064A\u0646. \u064A\u0631\u062C\u0649 \u062A\u063A\u064A\u064A\u0631 \u0648\u0631\u062F\u064A\u0627\u062A\u0647\u0645 \u0623\u0648 \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0648\u0631\u062F\u064A\u0629 \u0645\u0646\u0647\u0645 \u0623\u0648\u0644\u0627\u064B. '),n(),i(13,"div",56),_(14,de,13,5,"div",57),n()(),i(15,"div",15)(16,"app-button",58),c("btnClick",function(){p(e);let a=m();return f(a.closeUsersModal())}),r(17," \u0625\u0644\u063A\u0627\u0621 "),n(),i(18,"app-button",3),c("btnClick",function(){p(e);let a=m();return f(a.proceedWithDeletion())}),_(19,ce,2,0,"span",45)(20,me,2,0,"span",45),n()()()()}if(s&2){let e=m();u(11),h(e.shiftToDelete==null?null:e.shiftToDelete.name),u(3),l("ngForOf",e.usersWithThisShift),u(2),l("disabled",e.updatingUserShifts),u(2),l("disabled",e.usersWithThisShift.length>0||e.updatingUserShifts),u(),l("ngIf",e.updatingUserShifts),u(),l("ngIf",!e.updatingUserShifts)}}var G=class s{constructor(o,e){this.sb=o;this.router=e}shifts=[];filteredShifts=[];loading=!1;saving=!1;error="";searchQuery="";deleteModalVisible=!1;shiftToDelete=null;viewModalVisible=!1;selectedShift=null;usersWithThisShift=[];showUsersModal=!1;allShifts=[];updatingUserShifts=!1;showError=!1;ngOnInit(){return v(this,null,function*(){yield this.loadShifts()})}loadShifts(){return v(this,null,function*(){try{this.loading=!0,this.error="";let{data:o,error:e}=yield this.sb.rpc("shifts_get");if(e)throw e;this.shifts=o??[],this.filteredShifts=[...this.shifts],this.allShifts=[...this.shifts]}catch(o){console.error("Error loading shifts:",o),this.error="\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0648\u0631\u062F\u064A\u0627\u062A"}finally{this.loading=!1}})}filterShifts(){let o=[...this.shifts];if(this.searchQuery.trim()){let e=this.searchQuery.toLowerCase().trim();o=o.filter(t=>t.name?.toLowerCase().includes(e)||t.start_time?.includes(e)||t.end_time?.includes(e)||t.description?.toLowerCase().includes(e))}this.filteredShifts=o}clearSearch(){this.searchQuery="",this.filteredShifts=[...this.shifts]}navigateToNew(){this.router.navigate(["shifts","new"])}editShift(o){o.id&&this.router.navigate(["shifts","edit",o.id])}viewShift(o){this.selectedShift=o,this.viewModalVisible=!0}closeViewModal(){this.viewModalVisible=!1,this.selectedShift=null}deleteShift(o){o.id&&(this.shiftToDelete=o,this.deleteModalVisible=!0)}confirmDelete(){return v(this,null,function*(){if(this.shiftToDelete?.id)try{this.saving=!0;let{data:o}=yield this.sb.rpc("users_get"),e=(o||[]).filter(d=>d.shift_id===this.shiftToDelete.id);if(console.log("Shift to delete:",this.shiftToDelete),console.log("All users:",o),console.log("Users with this shift:",e),e.length>0){this.usersWithThisShift=e,this.saving=!1,this.deleteModalVisible=!1;let d=A({},this.shiftToDelete);this.shiftToDelete=null,setTimeout(()=>{this.shiftToDelete=d,this.showUsersModal=!0,console.log("Showing users modal after timeout")},200);return}let{data:t,error:a}=yield this.sb.rpc("shifts_delete",{_id:this.shiftToDelete.id});if(a){let d=a.message||"";if((a.code||"")==="23503"||/foreign key/i.test(d)||/violat(es|ed) foreign key/i.test(d))this.error="\u0644\u0627 \u064A\u0645\u0643\u0646 \u062D\u0630\u0641 \u0627\u0644\u0648\u0631\u062F\u064A\u0629 \u0644\u0623\u0646\u0647\u0627 \u0645\u0631\u062A\u0628\u0637\u0629 \u0628\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646. \u0627\u0644\u0631\u062C\u0627\u0621 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646 \u0623\u0648\u0644\u0627\u064B \u0623\u0648 \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0648\u0631\u062F\u064A\u0629 \u0645\u0646 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646.",this.showError=!0,setTimeout(()=>this.showError=!1,5e3);else throw a;return}t?(this.shifts=this.shifts.filter(d=>d.id!==this.shiftToDelete.id),this.filteredShifts=this.filteredShifts.filter(d=>d.id!==this.shiftToDelete.id),this.cancelDelete()):this.error="\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0627\u0644\u0648\u0631\u062F\u064A\u0629 \u0627\u0644\u0645\u0631\u0627\u062F \u062D\u0630\u0641\u0647\u0627"}catch(o){console.error("Error deleting shift:",o),this.error="\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062D\u0630\u0641 \u0627\u0644\u0648\u0631\u062F\u064A\u0629"}finally{this.saving=!1}})}cancelDelete(){this.deleteModalVisible=!1,this.shiftToDelete=null}closeUsersModal(){this.showUsersModal=!1,this.usersWithThisShift=[]}onShiftChange(o,e){let t=e.target;t&&this.updateUserShift(o,t.value)}updateUserShift(o,e){return v(this,null,function*(){try{this.updatingUserShifts=!0;let{error:t}=yield this.sb.rpc("users_update",{_id:o.id,_shift_id:e==="null"?null:e});if(t)throw t;o.shift_id=e==="null"?null:e,o.shift_id!==this.shiftToDelete.id&&(this.usersWithThisShift=this.usersWithThisShift.filter(a=>a.id!==o.id))}catch(t){console.error("Error updating user shift:",t),this.error="\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B \u0648\u0631\u062F\u064A\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"}finally{this.updatingUserShifts=!1}})}proceedWithDeletion(){return v(this,null,function*(){this.usersWithThisShift.length===0&&(this.closeUsersModal(),yield this.performDeletion())})}performDeletion(){return v(this,null,function*(){if(this.shiftToDelete?.id)try{this.saving=!0;let{data:o,error:e}=yield this.sb.rpc("shifts_delete",{_id:this.shiftToDelete.id});if(e){let t=e.message||"";if((e.code||"")==="23503"||/foreign key/i.test(t)||/violat(es|ed) foreign key/i.test(t))this.error="\u0644\u0627 \u064A\u0645\u0643\u0646 \u062D\u0630\u0641 \u0627\u0644\u0648\u0631\u062F\u064A\u0629 \u0644\u0623\u0646\u0647\u0627 \u0645\u0631\u062A\u0628\u0637\u0629 \u0628\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646. \u0627\u0644\u0631\u062C\u0627\u0621 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646 \u0623\u0648\u0644\u0627\u064B \u0623\u0648 \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0648\u0631\u062F\u064A\u0629 \u0645\u0646 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646.",this.showError=!0,setTimeout(()=>this.showError=!1,5e3);else throw e;return}o?(this.shifts=this.shifts.filter(t=>t.id!==this.shiftToDelete.id),this.filteredShifts=this.filteredShifts.filter(t=>t.id!==this.shiftToDelete.id),this.cancelDelete()):this.error="\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0627\u0644\u0648\u0631\u062F\u064A\u0629 \u0627\u0644\u0645\u0631\u0627\u062F \u062D\u0630\u0641\u0647\u0627"}catch(o){this.error=o?.message??"\u0641\u0634\u0644 \u062D\u0630\u0641 \u0627\u0644\u0648\u0631\u062F\u064A\u0629"}finally{this.saving=!1}})}computeEndTime(o,e){if(!o||e==null)return"-";let[t,a]=String(o).split(":"),d=Number(t),x=Number(a);if(Number.isNaN(d)||Number.isNaN(x))return"-";let J=d*60+x,K=Math.round(Number(e)*60),M=(J+K)%1440,X=Math.floor(M/60),Y=M%60,w=C=>C<10?"0"+C:String(C);return`${w(X)}:${w(Y)}`}getAssignableShifts(){let o=this.shiftToDelete?.id;return o?this.allShifts.filter(e=>e.id!==o):this.allShifts}static \u0275fac=function(e){return new(e||s)(S(N),S(I))};static \u0275cmp=E({type:s,selectors:[["app-shifts-list"]],decls:31,vars:17,consts:[[1,"page-header"],[1,"header-content"],[1,"page-subtitle"],["variant","primary",3,"btnClick","disabled"],[1,"search-bar"],[1,"search-section"],["placeholder","\u0627\u0644\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0648\u0631\u062F\u064A\u0627\u062A \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0627\u0644\u0648\u0635\u0641...",3,"ngModelChange","search","clear","ngModel"],["message","\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0648\u0631\u062F\u064A\u0627\u062A...",3,"overlay",4,"ngIf"],["class","error-message",4,"ngIf"],["class","shifts-list-container",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],["type","button",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["variant","outline",3,"btnClick"],[3,"confirm","cancel","visible","title","message","itemName","loading"],["class","users-modal-overlay",3,"click",4,"ngIf"],["message","\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0648\u0631\u062F\u064A\u0627\u062A...",3,"overlay"],[1,"error-message"],["variant","outline","size","sm",3,"btnClick"],[1,"shifts-list-container"],[3,"title","subtitle",4,"ngIf"],["class","empty-state",4,"ngIf"],[3,"title","subtitle"],[1,"table-container"],[1,"app-table"],[4,"ngFor","ngForOf"],[1,"shift-name"],[1,"name-text"],[1,"start-time"],[1,"time-badge"],[1,"duration"],[1,"duration-text"],[1,"end-time"],[1,"grace-minutes"],[1,"grace-badge"],[1,"actions"],[1,"action-buttons"],["variant","primary","size","sm",3,"btnClick","disabled"],["variant","outline","size","sm",3,"btnClick","disabled"],["variant","danger","size","sm",3,"btnClick","disabled"],[1,"empty-state"],[1,"empty-icon"],[4,"ngIf"],["variant","primary",3,"btnClick",4,"ngIf"],["variant","primary",3,"btnClick"],[1,"modal-body"],[1,"info-section"],[1,"info-grid"],[1,"info-item"],[1,"users-modal-overlay",3,"click"],[1,"users-modal-content",3,"click"],[1,"close-btn",3,"click"],[1,"modal-description"],[1,"users-list"],["class","user-item",4,"ngFor","ngForOf"],["variant","outline",3,"btnClick","disabled"],[1,"user-item"],[1,"user-info"],[1,"user-name"],[1,"user-email"],[1,"shift-selector"],[3,"change","value","disabled"],["value","null"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),r(3,"\u0627\u0644\u0648\u0631\u062F\u064A\u0627\u062A"),n(),i(4,"p",2),r(5,"\u0625\u062F\u0627\u0631\u0629 \u0648\u0631\u062F\u064A\u0627\u062A \u0627\u0644\u0639\u0645\u0644 \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645"),n()(),i(6,"app-button",3),c("btnClick",function(){return t.navigateToNew()}),i(7,"span"),r(8,"\u2795"),n(),r(9," \u0625\u0636\u0627\u0641\u0629 \u0648\u0631\u062F\u064A\u0629 \u062C\u062F\u064A\u062F\u0629 "),n()(),i(10,"div",4)(11,"div",5)(12,"app-enhanced-search",6),k("ngModelChange",function(d){return T(t.searchQuery,d)||(t.searchQuery=d),d}),c("search",function(){return t.filterShifts()})("clear",function(){return t.clearSearch()}),n()()(),_(13,Z,1,1,"app-spinner",7)(14,ee,7,1,"div",8)(15,se,3,2,"div",9),i(16,"div",10),c("click",function(){return t.closeViewModal()}),i(17,"div",11),c("click",function(d){return d.stopPropagation()}),i(18,"div",12)(19,"h3"),r(20,"\u0639\u0631\u0636 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0648\u0631\u062F\u064A\u0629"),n(),i(21,"button",13),c("click",function(){return t.closeViewModal()}),r(22,"\xD7"),n()(),_(23,ae,35,6,"div",14),i(24,"div",15)(25,"app-button",16),c("btnClick",function(){return t.closeViewModal()}),r(26,"\u0625\u063A\u0644\u0627\u0642"),n(),i(27,"app-button",3),c("btnClick",function(){return t.editShift(t.selectedShift)}),r(28,"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0648\u0631\u062F\u064A\u0629"),n()()()(),i(29,"app-delete-confirmation",17),c("confirm",function(){return t.confirmDelete()})("cancel",function(){return t.cancelDelete()}),n(),_(30,pe,21,6,"div",18)),e&2&&(u(6),l("disabled",t.loading),u(6),P("ngModel",t.searchQuery),u(),l("ngIf",t.loading),u(),l("ngIf",t.error&&!t.loading),u(),l("ngIf",!t.loading&&!t.error),u(),y("visible",t.viewModalVisible),u(),y("visible",t.viewModalVisible),u(6),l("ngIf",t.selectedShift),u(4),l("disabled",!t.selectedShift),u(2),l("visible",t.deleteModalVisible)("title","\u062D\u0630\u0641 \u0627\u0644\u0648\u0631\u062F\u064A\u0629")("message","\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u0648\u0631\u062F\u064A\u0629\u061F")("itemName",t.shiftToDelete==null?null:t.shiftToDelete.name)("loading",t.saving),u(),l("ngIf",t.showUsersModal))},dependencies:[L,F,D,V,Q,W,j,z,U,R,$,q,H,B],styles:[".page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem;gap:1rem}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--color-primary-dark);font-size:1.8rem}.page-subtitle[_ngcontent-%COMP%]{margin:0;color:var(--muted-text);font-size:1rem}.search-bar[_ngcontent-%COMP%]{margin-bottom:1.5rem}.search-section[_ngcontent-%COMP%]{position:relative;max-width:500px}.error-message[_ngcontent-%COMP%]{background:#fee;border:1px solid #fcc;border-radius:8px;padding:1rem;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.2rem}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#c62828;flex:1}.shifts-list-container[_ngcontent-%COMP%]{margin-top:1rem}.shift-name[_ngcontent-%COMP%]{min-width:150px}.name-text[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color)}.start-time[_ngcontent-%COMP%], .end-time[_ngcontent-%COMP%]{width:100px}.time-badge[_ngcontent-%COMP%]{display:inline-block;background:var(--color-primary);color:#fff;padding:.25rem .5rem;border-radius:4px;font-size:.8rem;font-weight:600;font-family:monospace}.duration[_ngcontent-%COMP%]{width:100px}.duration-text[_ngcontent-%COMP%]{font-weight:500;color:var(--text-color)}.grace-minutes[_ngcontent-%COMP%]{width:100px}.grace-badge[_ngcontent-%COMP%]{display:inline-block;background:#f8f9fa;color:var(--text-color);padding:.25rem .5rem;border-radius:4px;font-size:.8rem;font-weight:500;border:1px solid var(--border-color)}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;color:var(--muted-text)}.empty-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-color)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1.5rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:none;align-items:center;justify-content:center;z-index:1000;opacity:0;pointer-events:none;transition:opacity .3s ease}.modal-overlay.visible[_ngcontent-%COMP%]{display:flex;opacity:1;pointer-events:auto}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:min(700px,95vw);max-height:90vh;overflow:hidden;box-shadow:0 20px 60px #0000004d;transform:scale(.9);transition:transform .3s ease}.modal.visible[_ngcontent-%COMP%]{transform:scale(1)}.modal-header[_ngcontent-%COMP%]{background:var(--color-primary-dark);color:#fff;padding:1.25rem 1.5rem;display:flex;align-items:center;justify-content:space-between}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600}.modal-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:1.5rem;cursor:pointer;padding:.25rem;border-radius:4px;transition:background .2s ease}.modal-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#ffffff1a}.modal-body[_ngcontent-%COMP%]{padding:1.5rem;max-height:60vh;overflow-y:auto}.modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid var(--border-color);display:flex;gap:.75rem;justify-content:flex-end;background:#f8f9fa}.info-section[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--border-color);border-radius:8px;padding:1rem}.info-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--color-primary-dark);font-size:1rem;font-weight:600;border-bottom:2px solid var(--color-primary);padding-bottom:.5rem}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color);font-size:.9rem}.info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--muted-text);font-size:.95rem}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-section[_ngcontent-%COMP%]{max-width:none}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.users-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000;width:100vw;height:100vh}.users-modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 30px #0000004d;max-width:700px;width:90%;max-height:80vh;overflow:hidden;display:flex;flex-direction:column;position:relative;z-index:10001}.modal-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-primary-dark);font-size:1.5rem}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#666;padding:.25rem;line-height:1}.close-btn[_ngcontent-%COMP%]:hover{color:#333}.modal-body[_ngcontent-%COMP%]{padding:1.5rem;flex:1;overflow-y:auto}.modal-description[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:#666;line-height:1.5}.users-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.user-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#f8f9fa;border-radius:8px;border:1px solid #e9ecef}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.user-name[_ngcontent-%COMP%]{font-weight:600;color:#333}.user-email[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.shift-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.shift-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#555;white-space:nowrap}.shift-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ddd;border-radius:6px;background:#fff;min-width:200px}.shift-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled{background:#f5f5f5;color:#999}.modal-footer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid #e0e0e0;display:flex;justify-content:flex-end;gap:1rem}"]})};export{G as ShiftsListComponent};
